# AdminSystemController 기능 문서

## 개요
`AdminSystemController`는 관리자 패널의 시스템 모니터링 및 관리 기능을 담당하는 핵심 컨트롤러입니다. 시스템 상태, 성능 지표, 하드웨어 정보, 운영 환경 등을 실시간으로 모니터링하고 관리합니다.

## 도메인 모델

### 핵심 개념
- **시스템 모니터링**: 실시간 시스템 상태 및 성능 지표 추적
- **하드웨어 정보**: CPU, 메모리, 디스크, 네트워크 상태 모니터링
- **운영 환경**: PHP, Laravel, 데이터베이스, 세션 정보 관리
- **성능 분석**: 시스템 성능 트렌드 및 병목 지점 분석

### 주요 엔티티
- `SystemBackupLog`: 시스템 백업 로그
- `SystemMaintenanceLog`: 시스템 유지보수 로그
- `SystemOperationLog`: 시스템 운영 로그
- `SystemPerformanceLog`: 시스템 성능 로그

## 주요 기능

### 1. 시스템 대시보드
- **통합 모니터링**: 모든 시스템 컴포넌트의 상태를 한눈에 확인
- **실시간 업데이트**: AJAX를 통한 실시간 데이터 갱신
- **차트 및 그래프**: 성능 트렌드 시각화

### 2. 하드웨어 모니터링
- **CPU 모니터링**: 사용률, 코어 수, 모델명 정보
- **메모리 모니터링**: 총량, 사용량, 여유량, 사용률
- **디스크 모니터링**: 총 용량, 사용량, 여유 공간, 사용률
- **시스템 업타임**: 운영 시간 및 재시작 이력

### 3. 소프트웨어 환경 모니터링
- **PHP 정보**: 버전, 확장 모듈, 설정값
- **Laravel 정보**: 버전, 환경 설정, 유지보수 모드
- **데이터베이스 정보**: 연결 상태, 버전, 테이블 수, 크기
- **세션 정보**: 드라이버, 수명, 보안 설정

### 4. 성능 분석
- **백업 성공률**: 백업 작업의 성공/실패 비율
- **운영 로그 분석**: 시스템 작업의 성공률 및 실행 시간
- **성능 지표**: 시스템 응답 시간 및 처리량 분석

## 비즈니스 로직

### 모니터링 규칙
1. **실시간 모니터링**: 1분 간격으로 시스템 상태 확인
2. **임계치 관리**: CPU, 메모리, 디스크 사용률 임계치 설정
3. **알림 시스템**: 임계치 초과 시 관리자에게 알림

### 데이터 수집 전략
- **크로스 플랫폼**: Windows와 Linux/Unix 환경 모두 지원
- **다중 방법**: wmic, PowerShell, 명령어 등 다양한 방법으로 정보 수집
- **오류 처리**: 정보 수집 실패 시 기본값 사용 및 로그 기록

## API 엔드포인트

### 시스템 정보
- `GET /admin/systems` - 시스템 대시보드 메인 페이지
- `GET /admin/systems/status` - 시스템 상태 요약 (JSON)
- `GET /admin/systems/php-detail` - PHP 상세 정보
- `GET /admin/systems/laravel-detail` - Laravel 상세 정보
- `GET /admin/systems/database-detail` - 데이터베이스 상세 정보
- `GET /admin/systems/session-detail` - 세션 상세 정보

## 데이터베이스 스키마

### 관련 테이블
- `system_backup_logs`: 시스템 백업 로그
- `system_maintenance_logs`: 시스템 유지보수 로그
- `system_operation_logs`: 시스템 운영 로그
- `system_performance_logs`: 시스템 성능 로그

## 보안 고려사항

### 접근 제어
- **관리자 권한**: 시스템 정보 접근은 관리자만 가능
- **민감 정보 보호**: 데이터베이스 비밀번호 등 민감 정보 마스킹
- **감사 로그**: 시스템 정보 조회 이력 기록

### 데이터 보호
- **읽기 전용**: 시스템 정보는 조회만 가능, 수정 불가
- **제한된 정보**: 민감한 시스템 정보는 제한적으로 제공

## 성능 최적화

### 데이터 수집 최적화
- **캐싱**: 시스템 정보를 일정 시간 동안 캐싱
- **비동기 수집**: 무거운 정보 수집은 백그라운드에서 처리
- **선택적 수집**: 필요한 정보만 선택적으로 수집

### 쿼리 최적화
- **인덱싱**: 로그 테이블에 적절한 인덱스 설정
- **페이지네이션**: 대용량 데이터는 페이지 단위로 처리
- **집계 쿼리**: 통계 데이터는 미리 계산하여 저장

## 모니터링 및 알림

### 시스템 모니터링
- **리소스 모니터링**: CPU, 메모리, 디스크 사용률 실시간 추적
- **성능 모니터링**: 응답 시간, 처리량, 오류율 모니터링
- **가용성 모니터링**: 서비스 가용성 및 다운타임 추적

### 알림 설정
- **임계치 알림**: 리소스 사용률 임계치 초과 시 알림
- **오류 알림**: 시스템 오류 발생 시 즉시 알림
- **성능 알림**: 성능 저하 시 사전 알림

## 테스트 전략

### 단위 테스트
- **컨트롤러 테스트**: API 엔드포인트 동작 검증
- **유틸리티 테스트**: 정보 수집 메소드 검증
- **포맷팅 테스트**: 데이터 포맷팅 메소드 검증

### 통합 테스트
- **시스템 정보 수집**: 실제 시스템에서 정보 수집 테스트
- **크로스 플랫폼**: Windows와 Linux 환경에서 동작 테스트
- **오류 처리**: 정보 수집 실패 시 동작 테스트

### 성능 테스트
- **응답 시간**: API 응답 시간 측정
- **동시 접근**: 다중 사용자 동시 접근 테스트
- **메모리 사용량**: 정보 수집 시 메모리 사용량 측정

## 배포 및 운영

### 배포 체크리스트
- [ ] 크로스 플랫폼 호환성 확인
- [ ] 시스템 명령어 실행 권한 확인
- [ ] 로그 설정 및 권한 구성
- [ ] 모니터링 및 알림 설정

### 운영 가이드
- **정기 모니터링**: 시스템 상태 정기 점검
- **성능 튜닝**: 시스템 성능 지속적 개선
- **보안 감사**: 시스템 접근 및 권한 정기 검토

### 문제 해결
- **정보 수집 실패**: 시스템 명령어 실행 권한 확인
- **성능 저하**: 캐싱 및 쿼리 최적화
- **크로스 플랫폼 이슈**: OS별 명령어 및 권한 확인

## 관련 문서
- [SystemBackupLog 백업 로그](../SystemBackupLog.md)
- [SystemMaintenanceLog 유지보수 로그](../SystemMaintenanceLog.md)
- [SystemOperationLog 운영 로그](../SystemOperationLog.md)
- [SystemPerformanceLog 성능 로그](../SystemPerformanceLog.md)
- [AdminResourceController 기본 리소스 컨트롤러](../AdminResourceController.md)
